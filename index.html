<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GoodByee Princess</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  /* --------------------------- CSS from your previous design --------------------------- */
  *{margin:0;padding:0;box-sizing:border-box}
  body{min-height:100vh;display:flex;justify-content:center;align-items:center;font-family:"Poppins",sans-serif;background:#0b0a14;overflow:hidden;padding:0;margin:0}
  .gradient-bg{position:absolute;width:100%;height:100%;background:radial-gradient(circle at top left,#ff74b1 0%,transparent 60%),radial-gradient(circle at bottom right,#a890fe 0%,transparent 70%),radial-gradient(circle at top right,#ffcaed 0%,transparent 60%);filter:blur(80px);animation:shimmer 6s infinite alternate ease-in-out;z-index:0}
  @keyframes shimmer{0%{opacity:.8}100%{opacity:1}}
  .float-circle{position:absolute;width:120px;height:120px;background:rgba(255,255,255,.06);border-radius:50%;animation:float 12s infinite ease-in-out}
  @media(max-width:768px){.float-circle{width:80px;height:80px}}
  @media(max-width:480px){.float-circle{width:60px;height:60px}}
  @keyframes float{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-40px) scale(1.1)}100%{transform:translateY(0) scale(1)}}
  .butterfly{position:absolute;font-size:22px;opacity:.9;animation:fly 8s infinite ease-in-out}
  @media(max-width:480px){.butterfly{font-size:18px}}
  @keyframes fly{0%{transform:translate(0,0) rotate(0deg)}50%{transform:translate(40px,-60px) rotate(15deg)}100%{transform:translate(0,0) rotate(0deg)}}
  .soft-heart{position:absolute;font-size:26px;color:#ff8acb;opacity:.7;filter:drop-shadow(0 0 10px #ff8acb);animation:rotateHeart 9s linear infinite}
  @media(max-width:480px){.soft-heart{font-size:20px}}
  @keyframes rotateHeart{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
  .star{position:absolute;color:#ffe5ff;font-size:14px;opacity:.8;animation:starDrift 5s infinite ease-in-out}
  @media(max-width:480px){.star{font-size:12px}}
  @keyframes starDrift{0%{transform:translateY(0);opacity:.3}50%{transform:translateY(-25px);opacity:1}100%{transform:translateY(-50px);opacity:.3}}
  .player{position:relative;width:90%;max-width:340px;padding:28px 20px;background:rgba(255,255,255,.08);border-radius:24px;backdrop-filter:blur(12px);box-shadow:0 0 25px rgba(255,165,230,.3);text-align:center;z-index:10;transition:box-shadow .3s ease;margin:10px}
  @media(max-width:480px){.player{width:95%;padding:20px 15px;margin:5px;border-radius:20px}}
  .player.pulse{animation:pulse 1.5s infinite ease-in-out}
  @keyframes pulse{0%{box-shadow:0 0 25px #ff8adf55}50%{box-shadow:0 0 40px #ff8adf99}100%{box-shadow:0 0 25px #ff8adf55}}
  .pfp{width:130px;height:130px;border-radius:50%;margin:0 auto 15px;border:4px solid #ff9cd1;box-shadow:0 0 25px #ffb5e2aa;object-fit:cover}
  @media(max-width:480px){.pfp{width:110px;height:110px;border:3px solid #ff9cd1}}
  h1{color:#ff97dd;font-size:clamp(28px,8vw,35px);font-weight:600;margin-bottom:8px;font-family:'Monotype Corsiva',cursive;text-shadow:2px 2px 6px #ffb6c1,0 0 10px #ff69b4}
  .now-playing{color:#ffbdf0;font-size:clamp(16px,4vw,18px);text-shadow:0 0 10px #ff97dd,0 0 18px #ff5bc9;opacity:0;transition:opacity .4s ease;margin-bottom:18px}
  .now-playing.active{opacity:1}
  .wave{display:flex;justify-content:center;align-items:flex-end;gap:5px;height:40px;margin:22px 0}
  @media(max-width:480px){.wave{height:35px;margin:15px 0;gap:4px}}
  .bar{width:6px;height:12px;background:linear-gradient(to top,#ff9cd1,#ffb7e5);border-radius:4px;animation:bounce .8s ease-in-out infinite;animation-play-state:paused}
  @media(max-width:480px){.bar{width:5px;height:10px}}
  .bar:nth-child(2){animation-delay:.1s}.bar:nth-child(3){animation-delay:.2s}.bar:nth-child(4){animation-delay:.3s}.bar:nth-child(5){animation-delay:.4s}
  @keyframes bounce{0%,100%{height:10px}50%{height:38px}}
  .wave.active .bar{animation-play-state:running}
  .progress-container{margin:18px 0;padding:0 5px}
  @media(max-width:480px){.progress-container{margin:15px 0}}
  input[type=range]{width:100%;height:6px;appearance:none;background:rgba(255,215,240,.3);border-radius:5px;outline:none;cursor:pointer}
  input[type=range]::-webkit-slider-thumb{appearance:none;width:14px;height:14px;background:#ff9cd1;border-radius:50%;cursor:pointer;box-shadow:0 0 10px #ff9cd1}
  input[type=range]::-moz-range-thumb{width:14px;height:14px;background:#ff9cd1;border-radius:50%;cursor:pointer;border:none;box-shadow:0 0 10px #ff9cd1}
  .controls{display:flex;justify-content:center;align-items:center;gap:20px;margin-top:20px}
  @media(max-width:480px){.controls{gap:15px;margin-top:15px}}
  .btn{width:60px;height:60px;border-radius:50%;font-size:25px;background:linear-gradient(135deg,#ff9cd1,#ffb5e2);border:none;cursor:pointer;box-shadow:0 0 18px #ff9cd1aa;display:flex;align-items:center;justify-content:center;color:#fff;transition:transform .2s ease,box-shadow .2s ease}
  @media(max-width:480px){.btn{width:55px;height:55px;font-size:22px}}
  @media(max-width:360px){.btn{width:50px;height:50px;font-size:20px}}
  .btn:hover{transform:scale(1.1);box-shadow:0 0 25px #ff9cd1}
  .btn:active{transform:scale(0.95)}
  .like-section{display:flex;align-items:center;justify-content:center;gap:8px}
  .heart{font-size:32px;cursor:pointer;color:#ffc7e6;transition:transform .3s ease,text-shadow .3s ease;user-select:none}
  @media(max-width:480px){.heart{font-size:28px}}
  @media(max-width:360px){.heart{font-size:26px}}
  .heart:hover{transform:scale(1.1)}
  .heart.liked{transform:scale(1.2);text-shadow:0 0 15px #ff9cd1;color:#ff77c5}
  .like-count{color:#ffcbe9;font-size:20px;font-weight:600;min-width:30px}
  @media(max-width:480px){.like-count{font-size:18px;min-width:25px}}
  @media(max-width:360px){.like-count{font-size:16px;min-width:22px}}
  .confetti{position:fixed;pointer-events:none;z-index:9999}
</style>
</head>
<body>

<div class="gradient-bg"></div>

<div class="float-circle" style="top:12%; left:10%; animation-delay:0s;"></div>
<div class="float-circle" style="bottom:15%; right:8%; animation-delay:2s;"></div>
<div class="float-circle" style="top:60%; left:25%; animation-delay:4s;"></div>

<div class="butterfly" style="top:20%; left:15%; animation-delay:1s;">ü¶ã</div>
<div class="butterfly" style="top:70%; left:70%; animation-delay:3s;">ü¶ã</div>

<div class="soft-heart" style="top:30%; left:80%;">üíñ</div>
<div class="soft-heart" style="top:65%; left:25%;">üíó</div>

<div class="star" style="top:40%; left:30%;">‚ú¶</div>
<div class="star" style="top:55%; left:75%;">‚úß</div>
<div class="star" style="top:20%; left:60%;">‚ú¶</div>

<!-- Player -->
<div class="player" id="player">
  <img src="https://raw.githubusercontent.com/krsnaaaaaa/bye/main/girl.jpeg" class="pfp" alt="Profile Picture" />
  <h1>Bye Princess</h1>
  <div class="now-playing" id="nowPlaying">Now Playing‚Ä¶</div>

  <div class="wave" id="wave">
    <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
  </div>

  <div class="progress-container">
    <input type="range" id="progress" value="0" min="0" max="100">
  </div>

  <div class="controls">
    <button class="btn" id="playBtn">‚ñ∂</button>
    <div class="like-section">
      <span class="heart" id="heart">‚ô°</span>
      <span class="like-count" id="likeCount">0</span>
    </div>
  </div>

  <audio id="audio">
    <source src="https://raw.githubusercontent.com/krsnaaaaaa/songs/main/alvida.mpeg" type="audio/mpeg">
  </audio>
</div>

<script>
const audio=document.getElementById('audio'),
      playBtn=document.getElementById('playBtn'),
      wave=document.getElementById('wave'),
      progress=document.getElementById('progress'),
      heart=document.getElementById('heart'),
      likeCount=document.getElementById('likeCount');

const API_CONFIG={binId:'6922d0f0ae596e708f6b5adc',apiKey:'$2a$10$4plXoK759mo9BkFoA40Y4.4T3sk/kwuGTaoPZqt.Bn3ICoJji0VJ6',baseUrl:'https://api.jsonbin.io/v3/b'};
const SYNC_INTERVAL=3000;
const USE_API=API_CONFIG.binId!==''; 

let likes=0, likedUsers=new Set(), deviceId=getDeviceId(), isLiked=false, isLoading=true, isSaving=false;

function getDeviceId(){let id=localStorage.getItem('deviceId');if(!id){id='device_'+Math.random().toString(36).substr(2,9)+Date.now();localStorage.setItem('deviceId',id);}return id;}

async function loadLikes(){try{
  if(USE_API){
    const res=await fetch(`${API_CONFIG.baseUrl}/${API_CONFIG.binId}/latest`,{headers:{'X-Master-Key':API_CONFIG.apiKey}});
    if(res.ok){const data=await res.json();const record=data.record;likes=record.likes||0;likedUsers=new Set(record.likedUsers||[]);isLiked=likedUsers.has(deviceId);isLoading=false;updateUI();return;}
  }
  likes=parseInt(localStorage.getItem('likes'))||0;const stored=localStorage.getItem('likedUsers');likedUsers=stored?new Set(JSON.parse(stored)):new Set();isLiked=likedUsers.has(deviceId);isLoading=false;updateUI();
}catch(e){console.error(e);likes=parseInt(localStorage.getItem('likes'))||0;const stored=localStorage.getItem('likedUsers');likedUsers=stored?new Set(JSON.parse(stored)):new Set();isLiked=likedUsers.has(deviceId);isLoading=false;updateUI();}}

async function saveLikes(){if(isSaving)return;isSaving=true;try{const data={likes:likes,likedUsers:Array.from(likedUsers),lastUpdate:new Date().toISOString()};localStorage.setItem('likes',likes.toString());localStorage.setItem('likedUsers',JSON.stringify(Array.from(likedUsers)));if(USE_API){await fetch(`${API_CONFIG.baseUrl}/${API_CONFIG.binId}`,{method:'PUT',headers:{'Content-Type':'application/json','X-Master-Key':API_CONFIG.apiKey},body:JSON.stringify(data)});}isSaving=false;}catch(e){console.error(e);isSaving=false;}}

function updateHeartUI(){if(isLiked){heart.classList.add('liked');heart.textContent='‚ù§Ô∏è';}else{heart.classList.remove('liked');heart.textContent='‚ô°';}}
function updateUI(){likeCount.textContent=likes;updateHeartUI();}

function startSync(){if(!USE_API)return;setInterval(syncLikes,SYNC_INTERVAL);}
async function syncLikes(){if(!USE_API)return;try{const res=await fetch(`${API_CONFIG.baseUrl}/${API_CONFIG.binId}/latest`,{headers:{'X-Master-Key':API_CONFIG.apiKey}});if(res.ok){const data=await res.json();const record=data.record;const newLikes=record.likes||0;const newLikedUsers=new Set(record.likedUsers||[]);const newIsLiked=newLikedUsers.has(deviceId);if(newLikes!==likes||newIsLiked!==isLiked){likes=newLikes;likedUsers=newLikedUsers;isLiked=newIsLiked;updateUI();localStorage.setItem('likes',likes.toString());localStorage.setItem('likedUsers',JSON.stringify(Array.from(likedUsers)));}}}catch(e){console.warn(e);}}

heart.addEventListener('click',async()=>{
  if(isLoading||isSaving)return;
  if(!isLiked){likes++;likedUsers.add(deviceId);isLiked=true;updateUI();createConfetti();}
  else{likes--;likedUsers.delete(deviceId);isLiked=false;updateUI();}
  await saveLikes();
  await syncLikes();
});

playBtn.addEventListener('click',()=>{
  if(audio.paused){audio.play();playBtn.textContent='‚è∏';wave.classList.add('active');document.getElementById('nowPlaying').classList.add('active');document.getElementById('player').classList.add('pulse');}
  else{audio.pause();playBtn.textContent='‚ñ∂';wave.classList.remove('active');document.getElementById('nowPlaying').classList.remove('active');document.getElementById('player').classList.remove('pulse');}
});

audio.addEventListener('timeupdate',()=>{if(audio.duration)progress.value=(audio.currentTime/audio.duration)*100;});
progress.addEventListener('input',()=>{if(audio.duration)audio.currentTime=(progress.value/100)*audio.duration;});

function createConfetti(){const emojis=['‚ú®','üíñ','üå∏','üí´','‚≠ê','üíù','üéÄ','üå∫'];const rect=document.getElementById('player').getBoundingClientRect();const cx=rect.left+rect.width/2;const cy=rect.top+rect.height/2;for(let i=0;i<30;i++){const c=document.createElement('div');c.className='confetti';c.textContent=emojis[Math.floor(Math.random()*emojis.length)];c.style.fontSize=(16+Math.random()*10)+'px';c.style.left=cx+'px';c.style.top=cy+'px';document.body.appendChild(c);const angle=(Math.PI*2*i)/30+(Math.random()-.5)*.5;const dist=80+Math.random()*120;const x=Math.cos(angle)*dist,y=Math.sin(angle)*dist-60;c.animate([{transform:`translate(0,0) rotate(0deg)`,opacity:1},{transform:`translate(${x}px,${y}px) rotate(${Math.random()*720}deg)`,opacity:0}],{duration:1000+Math.random()*400,iterations:1,easing:'ease-out'});setTimeout(()=>c.remove(),1400);}}

async function init(){likeCount.textContent='...';await loadLikes();startSync();}
init();
</script>
</body>
</html>

